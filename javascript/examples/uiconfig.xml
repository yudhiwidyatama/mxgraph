<mxEditor>
	<ui>
		<add as="graph" element="graph"/>
		<add as="toolbar" element="toolbox"/>
	</ui>
	<Array as="templates">
		<add as="myFirstTemplate">
			<Rect label="Rectangle" href="">
				<mxCell vertex="1">	
					<mxGeometry as="geometry" width="80" height="40"/>
				</mxCell>
			</Rect>
		</add>
	</Array>
	<Array as="actions">
		<add as="saveToFile"><![CDATA[
			function (editor, cell)
			{
				var encoder = new mxCodec();
				gModel = editor.graph.getModel();
				var node = encoder.encode(gModel);
				var content = mxUtils.getPrettyXml(node);
				var aEl = '<a download="savedgraph.xml" href = "data:application/x-json;base64,' + btoa(content) +'">Download Here</a>';
				//mxUtils.popup(mxUtils.getPrettyXml(node), true);

				var div = document.createElement('div');
				div.style.overflow = 'scroll';
				div.style.width = '636px';
				div.style.height = '460px';
				
				var pre = document.createElement('pre');
				pre.innerHTML = aEl;
				
				div.appendChild(pre);
				
				var w = document.body.clientWidth;
				var h = Math.max(document.body.clientHeight || 0, document.documentElement.clientHeight)
				var wnd = new mxWindow('Popup Window', div,
					w/2-320, h/2-240, 400, 300, false, true);
	
				wnd.setClosable(true);
				wnd.setVisible(true);

			}
		]]></add>
		<add as="displayXML"><![CDATA[
			function (editor, cell)
			{
				var encoder = new mxCodec();
				gModel = editor.graph.getModel();
				var node = encoder.encode(gModel);
				mxUtils.popup(mxUtils.getPrettyXml(node), true);
				
			}
		]]></add>
	</Array>
	<mxDefaultToolbar as="toolbar">
		<add as="Delete" action="delete"/>
		<add as="Save" action="save"/>
		<add as="Save To File" action="saveToFile" />
		<add as="Export XML" action="displayXML" />
		<hr/><br/>
		<add as="Gear" template="myFirstTemplate" style="rounded=1" icon="images/icons48/server.png"/>
		<add as="Earth" template="myFirstTemplate" style="shape=ellipse" icon="images/icons48/earth.png"/>
	</mxDefaultToolbar>
	<mxDefaultPopupMenu as="popupHandler">	
		<add as="Show XML (Custom)" action="myFirstAction" icon="images/icons48/gear.png"/>
		<separator/>
		<add as="Delete (Built-in)" action="delete" icon="images/icons48/keys.png" if="cell"/>
	</mxDefaultPopupMenu>
</mxEditor>
